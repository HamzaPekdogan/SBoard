<html>
  <head>
    <script src="js/axios.min.js"></script>
    <script type="text/javascript">
      const fileReader = new FileReader()

      function InitThis() {
          ctx = document.getElementById('myCanvas').getContext("2d");
          $('#myCanvas').mousedown(function (e) {
              mousePressed = true;
              Draw(e.pageX - $(this).offset().left, e.pageY - $(this).offset().top, false);
          });

          $('#myCanvas').mousemove(function (e) {
              if (mousePressed) {
                  Draw(e.pageX - $(this).offset().left, e.pageY - $(this).offset().top, true);
              }
          });

          $('#myCanvas').mouseup(function (e) {
              mousePressed = false;
          });
              $('#myCanvas').mouseleave(function (e) {
              mousePressed = false;
          });
      }

      function fetchImage() {
        new Promise((res, rej) => {
          const url = "/screen.png?random=" + new Date().getTime()
          axios.get(url, { responseType: 'blob' })
            .then(function (response) {
              document.images["screen"].src = URL.createObjectURL(response.data)
              res(fetchImage())
            })
            .catch(function (error) { console.log(error) })
        })
      }

      document.addEventListener("DOMContentLoaded", fetchImage)
      document.addEventListener("DOMContentLoaded", fetchImage)
    </script>
  </head>
  <body>
    <img width="100%" id="screen">
  </body>
</html>
